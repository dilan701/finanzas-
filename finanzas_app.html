<style>body {background: white}</style><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Untitled</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="CoolUtils HTML exporter" />
<style type="text/css">
<!--
body { color: #000000; background-color: #FFFFFF; }
.python1-classname { color: #000080; font-weight: bold; }
.python1-comment { color: #808080; font-style: italic; }
.python1-commentedcode { color: #C0C0C0; font-style: italic; }
.python1-documentation { color: #CC00FF; }
.python1-float { color: #008080; }
.python1-functionname { color: #008080; font-weight: bold; }
.python1-hexadecimal { color: #008080; }
.python1-identifier { color: #000000; }
.python1-matchingbrace { color: #0000FF; font-weight: bold; }
.python1-multi-linestring { color: #808000; }
.python1-nonreservedkeyword { color: #000080; }
.python1-number { color: #008080; }
.python1-octal { color: #008080; }
.python1-reservedword { font-weight: bold; }
.python1-space { color: #C0C0C0; }
.python1-string { color: #808000; }
.python1-symbol { color: #800000; }
.python1-syntaxerror { color: #FF0000; }
.python1-systemfunctionsandvariables { font-weight: bold; }
.python1-unbalancedbrace { color: #FFFF00; }
-->
</style>
</head>
<body>
<!--StartFragment--><pre><code><span class="python1-reservedword">import</span><span class="python1-space"> </span><span class="python1-identifier">tkinter</span><span class="python1-space"> </span><span class="python1-reservedword">as</span><span class="python1-space"> </span><span class="python1-identifier">tk
</span><span class="python1-reservedword">from</span><span class="python1-space"> </span><span class="python1-identifier">tkinter</span><span class="python1-space"> </span><span class="python1-reservedword">import</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">messagebox
</span><span class="python1-reservedword">import</span><span class="python1-space"> </span><span class="python1-identifier">sqlite3
</span><span class="python1-reservedword">from</span><span class="python1-space"> </span><span class="python1-identifier">datetime</span><span class="python1-space"> </span><span class="python1-reservedword">import</span><span class="python1-space"> </span><span class="python1-identifier">datetime

</span><span class="python1-reservedword">class</span><span class="python1-space"> </span><span class="python1-classname">FinanceApp</span><span class="python1-symbol">:
</span><span class="python1-space">    </span><span class="python1-reservedword">def</span><span class="python1-space"> </span><span class="python1-functionname">__init__</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">root</span><span class="python1-symbol">):
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">root</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">root
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">root</span><span class="python1-symbol">.</span><span class="python1-identifier">title</span><span class="python1-symbol">(</span><span class="python1-string">&quot;Sistema de GestiГіn Financiera&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">root</span><span class="python1-symbol">.</span><span class="python1-identifier">geometry</span><span class="python1-symbol">(</span><span class="python1-string">&quot;900x600&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">root</span><span class="python1-symbol">.</span><span class="python1-identifier">configure</span><span class="python1-symbol">(</span><span class="python1-identifier">bg</span><span class="python1-symbol">=</span><span class="python1-string">'#f0f0f0'</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># Establecer conexiГіn con la base de datos
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">conn</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">sqlite3</span><span class="python1-symbol">.</span><span class="python1-identifier">connect</span><span class="python1-symbol">(</span><span class="python1-string">'finanzas.db'</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">create_tables</span><span class="python1-symbol">()
</span><span class="python1-space">        
        </span><span class="python1-comment"># Configurar estilo
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">style</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Style</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">style</span><span class="python1-symbol">.</span><span class="python1-identifier">configure</span><span class="python1-symbol">(</span><span class="python1-string">'TFrame'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">background</span><span class="python1-symbol">=</span><span class="python1-string">'#f0f0f0'</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">style</span><span class="python1-symbol">.</span><span class="python1-identifier">configure</span><span class="python1-symbol">(</span><span class="python1-string">'TButton'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">font</span><span class="python1-symbol">=(</span><span class="python1-string">'Arial'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">10</span><span class="python1-symbol">),</span><span class="python1-space"> </span><span class="python1-identifier">padding</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">style</span><span class="python1-symbol">.</span><span class="python1-identifier">configure</span><span class="python1-symbol">(</span><span class="python1-string">'Header.TLabel'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">font</span><span class="python1-symbol">=(</span><span class="python1-string">'Arial'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">14</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">'bold'</span><span class="python1-symbol">),</span><span class="python1-space"> </span><span class="python1-identifier">background</span><span class="python1-symbol">=</span><span class="python1-string">'#f0f0f0'</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">style</span><span class="python1-symbol">.</span><span class="python1-identifier">configure</span><span class="python1-symbol">(</span><span class="python1-string">'Option.TButton'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">font</span><span class="python1-symbol">=(</span><span class="python1-string">'Arial'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">11</span><span class="python1-symbol">),</span><span class="python1-space"> </span><span class="python1-identifier">width</span><span class="python1-symbol">=</span><span class="python1-number">20</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padding</span><span class="python1-symbol">=</span><span class="python1-number">10</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># Crear widgets
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">create_widgets</span><span class="python1-symbol">()
</span><span class="python1-space">        
    </span><span class="python1-reservedword">def</span><span class="python1-space"> </span><span class="python1-functionname">create_tables</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">):
</span><span class="python1-space">        </span><span class="python1-identifier">cursor</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">conn</span><span class="python1-symbol">.</span><span class="python1-identifier">cursor</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">execute</span><span class="python1-symbol">(</span><span class="python1-multi-linestring">'''
            CREATE TABLE IF NOT EXISTS transacciones (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                tipo TEXT NOT NULL,
                categoria TEXT NOT NULL,
                monto REAL NOT NULL,
                fecha TEXT NOT NULL,
                descripcion TEXT
            )
        '''</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">execute</span><span class="python1-symbol">(</span><span class="python1-multi-linestring">'''
            CREATE TABLE IF NOT EXISTS categorias (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                nombre TEXT NOT NULL UNIQUE,
                tipo TEXT NOT NULL
            )
        '''</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># Insertar categorГ­as predeterminadas si no existen
</span><span class="python1-space">        </span><span class="python1-identifier">default_categories</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-symbol">[
</span><span class="python1-space">            </span><span class="python1-symbol">(</span><span class="python1-string">'Alimentos'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">'Gasto'</span><span class="python1-symbol">),
</span><span class="python1-space">            </span><span class="python1-symbol">(</span><span class="python1-string">'Transporte'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">'Gasto'</span><span class="python1-symbol">),
</span><span class="python1-space">            </span><span class="python1-symbol">(</span><span class="python1-string">'Vivienda'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">'Gasto'</span><span class="python1-symbol">),
</span><span class="python1-space">            </span><span class="python1-symbol">(</span><span class="python1-string">'Entretenimiento'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">'Gasto'</span><span class="python1-symbol">),
</span><span class="python1-space">            </span><span class="python1-symbol">(</span><span class="python1-string">'Salario'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">'Ingreso'</span><span class="python1-symbol">),
</span><span class="python1-space">            </span><span class="python1-symbol">(</span><span class="python1-string">'Freelance'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">'Ingreso'</span><span class="python1-symbol">),
</span><span class="python1-space">            </span><span class="python1-symbol">(</span><span class="python1-string">'Inversiones'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">'Ingreso'</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-symbol">]
</span><span class="python1-space">        
        </span><span class="python1-reservedword">for</span><span class="python1-space"> </span><span class="python1-identifier">category</span><span class="python1-space"> </span><span class="python1-reservedword">in</span><span class="python1-space"> </span><span class="python1-identifier">default_categories</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-reservedword">try</span><span class="python1-symbol">:
</span><span class="python1-space">                </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">execute</span><span class="python1-symbol">(</span><span class="python1-string">'INSERT INTO categorias (nombre, tipo) VALUES (?, ?)'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">category</span><span class="python1-symbol">)
</span><span class="python1-space">            </span><span class="python1-reservedword">except</span><span class="python1-space"> </span><span class="python1-identifier">sqlite3</span><span class="python1-symbol">.</span><span class="python1-identifier">IntegrityError</span><span class="python1-symbol">:
</span><span class="python1-space">                </span><span class="python1-reservedword">pass
</span><span class="python1-space">        
        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">conn</span><span class="python1-symbol">.</span><span class="python1-identifier">commit</span><span class="python1-symbol">()
</span><span class="python1-space">    
    </span><span class="python1-reservedword">def</span><span class="python1-space"> </span><span class="python1-functionname">create_widgets</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">):
</span><span class="python1-space">        </span><span class="python1-comment"># Frame principal
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">main_frame</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Frame</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">root</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">main_frame</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">BOTH</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">expand</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">True</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">20</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=</span><span class="python1-number">20</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># Frame para el tГ­tulo
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">header_frame</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Frame</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">main_frame</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">header_frame</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">X</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=(</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">20</span><span class="python1-symbol">))
</span><span class="python1-space">        
        </span><span class="python1-comment"># TГ­tulo
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">title_label</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(
</span><span class="python1-space">            </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">header_frame</span><span class="python1-symbol">,</span><span class="python1-space"> 
            </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Sistema de GestiГіn Financiera&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> 
            </span><span class="python1-identifier">style</span><span class="python1-symbol">=</span><span class="python1-string">'Header.TLabel'
</span><span class="python1-space">        </span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">title_label</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">()
</span><span class="python1-space">        
        </span><span class="python1-comment"># Frame para el contenido (opciones y ГЎrea de trabajo)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">content_frame</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Frame</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">main_frame</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">content_frame</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">BOTH</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">expand</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">True</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># Frame para las opciones (vertical)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">options_frame</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Frame</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">content_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">width</span><span class="python1-symbol">=</span><span class="python1-number">200</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">options_frame</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">LEFT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">Y</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=(</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">20</span><span class="python1-symbol">))
</span><span class="python1-space">        
        </span><span class="python1-comment"># Botones de opciones
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">option_buttons</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-symbol">[]
</span><span class="python1-space">        </span><span class="python1-identifier">options</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-symbol">[
</span><span class="python1-space">            </span><span class="python1-symbol">(</span><span class="python1-string">&quot;Registrar TransacciГіn&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">show_transaction_form</span><span class="python1-symbol">),
</span><span class="python1-space">            </span><span class="python1-symbol">(</span><span class="python1-string">&quot;Ver Historial&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">show_transaction_history</span><span class="python1-symbol">),
</span><span class="python1-space">            </span><span class="python1-symbol">(</span><span class="python1-string">&quot;Resumen Financiero&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">show_financial_summary</span><span class="python1-symbol">),
</span><span class="python1-space">            </span><span class="python1-symbol">(</span><span class="python1-string">&quot;GestiГіn de CategorГ­as&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">show_category_management</span><span class="python1-symbol">),
</span><span class="python1-space">            </span><span class="python1-symbol">(</span><span class="python1-string">&quot;ConfiguraciГіn&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">show_settings</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-symbol">]
</span><span class="python1-space">        
        </span><span class="python1-reservedword">for</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">command</span><span class="python1-space"> </span><span class="python1-reservedword">in</span><span class="python1-space"> </span><span class="python1-identifier">options</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-identifier">btn</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Button</span><span class="python1-symbol">(
</span><span class="python1-space">                </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">options_frame</span><span class="python1-symbol">,</span><span class="python1-space"> 
                </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-identifier">text</span><span class="python1-symbol">,</span><span class="python1-space"> 
                </span><span class="python1-identifier">command</span><span class="python1-symbol">=</span><span class="python1-identifier">command</span><span class="python1-symbol">,
</span><span class="python1-space">                </span><span class="python1-identifier">style</span><span class="python1-symbol">=</span><span class="python1-string">'Option.TButton'
</span><span class="python1-space">            </span><span class="python1-symbol">)
</span><span class="python1-space">            </span><span class="python1-identifier">btn</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">X</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">            </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">option_buttons</span><span class="python1-symbol">.</span><span class="python1-identifier">append</span><span class="python1-symbol">(</span><span class="python1-identifier">btn</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># Frame para el ГЎrea de trabajo
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">work_area</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Frame</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">content_frame</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">work_area</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">LEFT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">BOTH</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">expand</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">True</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># Mostrar el formulario de transacciГіn por defecto
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">show_transaction_form</span><span class="python1-symbol">()
</span><span class="python1-space">    
    </span><span class="python1-reservedword">def</span><span class="python1-space"> </span><span class="python1-functionname">clear_work_area</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">):
</span><span class="python1-space">        </span><span class="python1-reservedword">for</span><span class="python1-space"> </span><span class="python1-identifier">widget</span><span class="python1-space"> </span><span class="python1-reservedword">in</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">work_area</span><span class="python1-symbol">.</span><span class="python1-identifier">winfo_children</span><span class="python1-symbol">():
</span><span class="python1-space">            </span><span class="python1-identifier">widget</span><span class="python1-symbol">.</span><span class="python1-identifier">destroy</span><span class="python1-symbol">()
</span><span class="python1-space">    
    </span><span class="python1-reservedword">def</span><span class="python1-space"> </span><span class="python1-functionname">show_transaction_form</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">):
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">clear_work_area</span><span class="python1-symbol">()
</span><span class="python1-space">        
        </span><span class="python1-comment"># Frame para el formulario
</span><span class="python1-space">        </span><span class="python1-identifier">form_frame</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Frame</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">work_area</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">form_frame</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">BOTH</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">expand</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">True</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">20</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=</span><span class="python1-number">20</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># TГ­tulo
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">form_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Registrar Nueva TransacciГіn&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">style</span><span class="python1-symbol">=</span><span class="python1-string">'Header.TLabel'</span><span class="python1-symbol">).</span><span class="python1-identifier">grid</span><span class="python1-symbol">(</span><span class="python1-identifier">row</span><span class="python1-symbol">=</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">column</span><span class="python1-symbol">=</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">columnspan</span><span class="python1-symbol">=</span><span class="python1-number">2</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=(</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">20</span><span class="python1-symbol">))
</span><span class="python1-space">        
        </span><span class="python1-comment"># Tipo de transacciГіn
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">form_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Tipo:&quot;</span><span class="python1-symbol">).</span><span class="python1-identifier">grid</span><span class="python1-symbol">(</span><span class="python1-identifier">row</span><span class="python1-symbol">=</span><span class="python1-number">1</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">column</span><span class="python1-symbol">=</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">sticky</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">W</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_type</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">StringVar</span><span class="python1-symbol">(</span><span class="python1-identifier">value</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Gasto&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Radiobutton</span><span class="python1-symbol">(</span><span class="python1-identifier">form_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Gasto&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">variable</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_type</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">value</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Gasto&quot;</span><span class="python1-symbol">).</span><span class="python1-identifier">grid</span><span class="python1-symbol">(</span><span class="python1-identifier">row</span><span class="python1-symbol">=</span><span class="python1-number">1</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">column</span><span class="python1-symbol">=</span><span class="python1-number">1</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">sticky</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">W</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Radiobutton</span><span class="python1-symbol">(</span><span class="python1-identifier">form_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Ingreso&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">variable</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_type</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">value</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Ingreso&quot;</span><span class="python1-symbol">).</span><span class="python1-identifier">grid</span><span class="python1-symbol">(</span><span class="python1-identifier">row</span><span class="python1-symbol">=</span><span class="python1-number">1</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">column</span><span class="python1-symbol">=</span><span class="python1-number">1</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">sticky</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">E</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># CategorГ­a
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">form_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;CategorГ­a:&quot;</span><span class="python1-symbol">).</span><span class="python1-identifier">grid</span><span class="python1-symbol">(</span><span class="python1-identifier">row</span><span class="python1-symbol">=</span><span class="python1-number">2</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">column</span><span class="python1-symbol">=</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">sticky</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">W</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">category_var</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">StringVar</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">category_combobox</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Combobox</span><span class="python1-symbol">(</span><span class="python1-identifier">form_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">textvariable</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">category_var</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">category_combobox</span><span class="python1-symbol">.</span><span class="python1-identifier">grid</span><span class="python1-symbol">(</span><span class="python1-identifier">row</span><span class="python1-symbol">=</span><span class="python1-number">2</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">column</span><span class="python1-symbol">=</span><span class="python1-number">1</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">sticky</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">EW</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">update_category_combobox</span><span class="python1-symbol">()
</span><span class="python1-space">        
        </span><span class="python1-comment"># Monto
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">form_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Monto:&quot;</span><span class="python1-symbol">).</span><span class="python1-identifier">grid</span><span class="python1-symbol">(</span><span class="python1-identifier">row</span><span class="python1-symbol">=</span><span class="python1-number">3</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">column</span><span class="python1-symbol">=</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">sticky</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">W</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">amount_entry</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Entry</span><span class="python1-symbol">(</span><span class="python1-identifier">form_frame</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">amount_entry</span><span class="python1-symbol">.</span><span class="python1-identifier">grid</span><span class="python1-symbol">(</span><span class="python1-identifier">row</span><span class="python1-symbol">=</span><span class="python1-number">3</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">column</span><span class="python1-symbol">=</span><span class="python1-number">1</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">sticky</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">EW</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># Fecha
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">form_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Fecha:&quot;</span><span class="python1-symbol">).</span><span class="python1-identifier">grid</span><span class="python1-symbol">(</span><span class="python1-identifier">row</span><span class="python1-symbol">=</span><span class="python1-number">4</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">column</span><span class="python1-symbol">=</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">sticky</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">W</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">date_entry</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Entry</span><span class="python1-symbol">(</span><span class="python1-identifier">form_frame</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">date_entry</span><span class="python1-symbol">.</span><span class="python1-identifier">grid</span><span class="python1-symbol">(</span><span class="python1-identifier">row</span><span class="python1-symbol">=</span><span class="python1-number">4</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">column</span><span class="python1-symbol">=</span><span class="python1-number">1</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">sticky</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">EW</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">date_entry</span><span class="python1-symbol">.</span><span class="python1-identifier">insert</span><span class="python1-symbol">(</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">datetime</span><span class="python1-symbol">.</span><span class="python1-identifier">now</span><span class="python1-symbol">().</span><span class="python1-identifier">strftime</span><span class="python1-symbol">(</span><span class="python1-string">&quot;%Y-%m-%d&quot;</span><span class="python1-symbol">))
</span><span class="python1-space">        
        </span><span class="python1-comment"># DescripciГіn
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">form_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;DescripciГіn:&quot;</span><span class="python1-symbol">).</span><span class="python1-identifier">grid</span><span class="python1-symbol">(</span><span class="python1-identifier">row</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">column</span><span class="python1-symbol">=</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">sticky</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">W</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">description_entry</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">Text</span><span class="python1-symbol">(</span><span class="python1-identifier">form_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">height</span><span class="python1-symbol">=</span><span class="python1-number">4</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">width</span><span class="python1-symbol">=</span><span class="python1-number">30</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">description_entry</span><span class="python1-symbol">.</span><span class="python1-identifier">grid</span><span class="python1-symbol">(</span><span class="python1-identifier">row</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">column</span><span class="python1-symbol">=</span><span class="python1-number">1</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">sticky</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">EW</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># BotГіn de guardar
</span><span class="python1-space">        </span><span class="python1-identifier">save_button</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Button</span><span class="python1-symbol">(</span><span class="python1-identifier">form_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Guardar TransacciГіn&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">command</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">save_transaction</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">save_button</span><span class="python1-symbol">.</span><span class="python1-identifier">grid</span><span class="python1-symbol">(</span><span class="python1-identifier">row</span><span class="python1-symbol">=</span><span class="python1-number">6</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">column</span><span class="python1-symbol">=</span><span class="python1-number">1</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">sticky</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">E</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=</span><span class="python1-number">20</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># Configurar el peso de las columnas
</span><span class="python1-space">        </span><span class="python1-identifier">form_frame</span><span class="python1-symbol">.</span><span class="python1-identifier">columnconfigure</span><span class="python1-symbol">(</span><span class="python1-number">1</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">weight</span><span class="python1-symbol">=</span><span class="python1-number">1</span><span class="python1-symbol">)
</span><span class="python1-space">    
    </span><span class="python1-reservedword">def</span><span class="python1-space"> </span><span class="python1-functionname">update_category_combobox</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">):
</span><span class="python1-space">        </span><span class="python1-identifier">cursor</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">conn</span><span class="python1-symbol">.</span><span class="python1-identifier">cursor</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">execute</span><span class="python1-symbol">(</span><span class="python1-string">'SELECT nombre FROM categorias WHERE tipo = ? ORDER BY nombre'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_type</span><span class="python1-symbol">.</span><span class="python1-identifier">get</span><span class="python1-symbol">(),))
</span><span class="python1-space">        </span><span class="python1-identifier">categories</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-symbol">[</span><span class="python1-identifier">row</span><span class="python1-symbol">[</span><span class="python1-number">0</span><span class="python1-symbol">]</span><span class="python1-space"> </span><span class="python1-reservedword">for</span><span class="python1-space"> </span><span class="python1-identifier">row</span><span class="python1-space"> </span><span class="python1-reservedword">in</span><span class="python1-space"> </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">fetchall</span><span class="python1-symbol">()]
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">category_combobox</span><span class="python1-symbol">[</span><span class="python1-string">'values'</span><span class="python1-symbol">]</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">categories
</span><span class="python1-space">        </span><span class="python1-reservedword">if</span><span class="python1-space"> </span><span class="python1-identifier">categories</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">category_var</span><span class="python1-symbol">.</span><span class="python1-identifier">set</span><span class="python1-symbol">(</span><span class="python1-identifier">categories</span><span class="python1-symbol">[</span><span class="python1-number">0</span><span class="python1-symbol">])
</span><span class="python1-space">    
    </span><span class="python1-reservedword">def</span><span class="python1-space"> </span><span class="python1-functionname">save_transaction</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">):
</span><span class="python1-space">        </span><span class="python1-identifier">tipo</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_type</span><span class="python1-symbol">.</span><span class="python1-identifier">get</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-identifier">categoria</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">category_var</span><span class="python1-symbol">.</span><span class="python1-identifier">get</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-identifier">monto</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">amount_entry</span><span class="python1-symbol">.</span><span class="python1-identifier">get</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-identifier">fecha</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">date_entry</span><span class="python1-symbol">.</span><span class="python1-identifier">get</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-identifier">descripcion</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">description_entry</span><span class="python1-symbol">.</span><span class="python1-identifier">get</span><span class="python1-symbol">(</span><span class="python1-string">&quot;1.0&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">END</span><span class="python1-symbol">).</span><span class="python1-identifier">strip</span><span class="python1-symbol">()
</span><span class="python1-space">        
        </span><span class="python1-comment"># Validaciones
</span><span class="python1-space">        </span><span class="python1-reservedword">if</span><span class="python1-space"> </span><span class="python1-reservedword">not</span><span class="python1-space"> </span><span class="python1-identifier">categoria</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-identifier">messagebox</span><span class="python1-symbol">.</span><span class="python1-identifier">showerror</span><span class="python1-symbol">(</span><span class="python1-string">&quot;Error&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;Por favor seleccione una categorГ­a&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">            </span><span class="python1-reservedword">return
</span><span class="python1-space">        
        </span><span class="python1-reservedword">try</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-identifier">monto</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">float</span><span class="python1-symbol">(</span><span class="python1-identifier">monto</span><span class="python1-symbol">)
</span><span class="python1-space">            </span><span class="python1-reservedword">if</span><span class="python1-space"> </span><span class="python1-identifier">monto</span><span class="python1-space"> </span><span class="python1-symbol">&lt;=</span><span class="python1-space"> </span><span class="python1-number">0</span><span class="python1-symbol">:
</span><span class="python1-space">                </span><span class="python1-reservedword">raise</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">ValueError
</span><span class="python1-space">        </span><span class="python1-reservedword">except</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">ValueError</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-identifier">messagebox</span><span class="python1-symbol">.</span><span class="python1-identifier">showerror</span><span class="python1-symbol">(</span><span class="python1-string">&quot;Error&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;Por favor ingrese un monto vГЎlido (nГєmero positivo)&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">            </span><span class="python1-reservedword">return
</span><span class="python1-space">        
        </span><span class="python1-reservedword">try</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-identifier">datetime</span><span class="python1-symbol">.</span><span class="python1-identifier">strptime</span><span class="python1-symbol">(</span><span class="python1-identifier">fecha</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;%Y-%m-%d&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-reservedword">except</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">ValueError</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-identifier">messagebox</span><span class="python1-symbol">.</span><span class="python1-identifier">showerror</span><span class="python1-symbol">(</span><span class="python1-string">&quot;Error&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;Por favor ingrese una fecha vГЎlida en formato YYYY-MM-DD&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">            </span><span class="python1-reservedword">return
</span><span class="python1-space">        
        </span><span class="python1-comment"># Guardar en la base de datos
</span><span class="python1-space">        </span><span class="python1-identifier">cursor</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">conn</span><span class="python1-symbol">.</span><span class="python1-identifier">cursor</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">execute</span><span class="python1-symbol">(</span><span class="python1-multi-linestring">'''
            INSERT INTO transacciones (tipo, categoria, monto, fecha, descripcion)
            VALUES (?, ?, ?, ?, ?)
        '''</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-symbol">(</span><span class="python1-identifier">tipo</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">categoria</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">monto</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">fecha</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">descripcion</span><span class="python1-symbol">))
</span><span class="python1-space">        
        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">conn</span><span class="python1-symbol">.</span><span class="python1-identifier">commit</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-identifier">messagebox</span><span class="python1-symbol">.</span><span class="python1-identifier">showinfo</span><span class="python1-symbol">(</span><span class="python1-string">&quot;Г‰xito&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;TransacciГіn registrada correctamente&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># Limpiar campos (excepto fecha y tipo)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">amount_entry</span><span class="python1-symbol">.</span><span class="python1-identifier">delete</span><span class="python1-symbol">(</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">END</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">description_entry</span><span class="python1-symbol">.</span><span class="python1-identifier">delete</span><span class="python1-symbol">(</span><span class="python1-string">&quot;1.0&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">END</span><span class="python1-symbol">)
</span><span class="python1-space">    
    </span><span class="python1-reservedword">def</span><span class="python1-space"> </span><span class="python1-functionname">show_transaction_history</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">):
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">clear_work_area</span><span class="python1-symbol">()
</span><span class="python1-space">        
        </span><span class="python1-comment"># Frame principal para el historial
</span><span class="python1-space">        </span><span class="python1-identifier">history_frame</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Frame</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">work_area</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">history_frame</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">BOTH</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">expand</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">True</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">20</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=</span><span class="python1-number">20</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># TГ­tulo
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">history_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Historial de Transacciones&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">style</span><span class="python1-symbol">=</span><span class="python1-string">'Header.TLabel'</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">pady</span><span class="python1-symbol">=(</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">20</span><span class="python1-symbol">))
</span><span class="python1-space">        
        </span><span class="python1-comment"># Filtros
</span><span class="python1-space">        </span><span class="python1-identifier">filter_frame</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Frame</span><span class="python1-symbol">(</span><span class="python1-identifier">history_frame</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">filter_frame</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">X</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=(</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">10</span><span class="python1-symbol">))
</span><span class="python1-space">        
        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">filter_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Filtrar por:&quot;</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">LEFT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">filter_type</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">StringVar</span><span class="python1-symbol">(</span><span class="python1-identifier">value</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Todos&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Radiobutton</span><span class="python1-symbol">(</span><span class="python1-identifier">filter_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Todos&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">variable</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">filter_type</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">value</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Todos&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> 
                       </span><span class="python1-identifier">command</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">update_transaction_table</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">LEFT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Radiobutton</span><span class="python1-symbol">(</span><span class="python1-identifier">filter_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Gastos&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">variable</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">filter_type</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">value</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Gasto&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> 
                       </span><span class="python1-identifier">command</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">update_transaction_table</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">LEFT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Radiobutton</span><span class="python1-symbol">(</span><span class="python1-identifier">filter_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Ingresos&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">variable</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">filter_type</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">value</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Ingreso&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> 
                       </span><span class="python1-identifier">command</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">update_transaction_table</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">LEFT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># Tabla de transacciones
</span><span class="python1-space">        </span><span class="python1-identifier">columns</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-symbol">(</span><span class="python1-string">&quot;#&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;Fecha&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;Tipo&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;CategorГ­a&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;Monto&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;DescripciГіn&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_tree</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Treeview</span><span class="python1-symbol">(
</span><span class="python1-space">            </span><span class="python1-identifier">history_frame</span><span class="python1-symbol">,</span><span class="python1-space"> 
            </span><span class="python1-identifier">columns</span><span class="python1-symbol">=</span><span class="python1-identifier">columns</span><span class="python1-symbol">,</span><span class="python1-space"> 
            </span><span class="python1-identifier">show</span><span class="python1-symbol">=</span><span class="python1-string">&quot;headings&quot;</span><span class="python1-symbol">,
</span><span class="python1-space">            </span><span class="python1-identifier">selectmode</span><span class="python1-symbol">=</span><span class="python1-string">&quot;extended&quot;
</span><span class="python1-space">        </span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-reservedword">for</span><span class="python1-space"> </span><span class="python1-identifier">col</span><span class="python1-space"> </span><span class="python1-reservedword">in</span><span class="python1-space"> </span><span class="python1-identifier">columns</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">heading</span><span class="python1-symbol">(</span><span class="python1-identifier">col</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-identifier">col</span><span class="python1-symbol">)
</span><span class="python1-space">            </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">column</span><span class="python1-symbol">(</span><span class="python1-identifier">col</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">width</span><span class="python1-symbol">=</span><span class="python1-number">100</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">anchor</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">CENTER</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">column</span><span class="python1-symbol">(</span><span class="python1-string">&quot;#&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">width</span><span class="python1-symbol">=</span><span class="python1-number">50</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">column</span><span class="python1-symbol">(</span><span class="python1-string">&quot;DescripciГіn&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">width</span><span class="python1-symbol">=</span><span class="python1-number">200</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">column</span><span class="python1-symbol">(</span><span class="python1-string">&quot;Monto&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">anchor</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">E</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-identifier">scrollbar</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Scrollbar</span><span class="python1-symbol">(</span><span class="python1-identifier">history_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">orient</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">VERTICAL</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">command</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">yview</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">configure</span><span class="python1-symbol">(</span><span class="python1-identifier">yscrollcommand</span><span class="python1-symbol">=</span><span class="python1-identifier">scrollbar</span><span class="python1-symbol">.</span><span class="python1-identifier">set</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">LEFT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">BOTH</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">expand</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">True</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">scrollbar</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">RIGHT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">Y</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># Botones de acciГіn
</span><span class="python1-space">        </span><span class="python1-identifier">button_frame</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Frame</span><span class="python1-symbol">(</span><span class="python1-identifier">history_frame</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">button_frame</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">X</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=(</span><span class="python1-number">10</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">0</span><span class="python1-symbol">))
</span><span class="python1-space">        
        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Button</span><span class="python1-symbol">(</span><span class="python1-identifier">button_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Eliminar Seleccionados&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">command</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">delete_selected_transactions</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">RIGHT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Button</span><span class="python1-symbol">(</span><span class="python1-identifier">button_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Exportar a CSV&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">command</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">export_to_csv</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">RIGHT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># Actualizar la tabla
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">update_transaction_table</span><span class="python1-symbol">()
</span><span class="python1-space">    
    </span><span class="python1-reservedword">def</span><span class="python1-space"> </span><span class="python1-functionname">update_transaction_table</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">):
</span><span class="python1-space">        </span><span class="python1-comment"># Limpiar tabla
</span><span class="python1-space">        </span><span class="python1-reservedword">for</span><span class="python1-space"> </span><span class="python1-identifier">item</span><span class="python1-space"> </span><span class="python1-reservedword">in</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">get_children</span><span class="python1-symbol">():
</span><span class="python1-space">            </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">delete</span><span class="python1-symbol">(</span><span class="python1-identifier">item</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># Obtener transacciones segГєn filtro
</span><span class="python1-space">        </span><span class="python1-identifier">cursor</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">conn</span><span class="python1-symbol">.</span><span class="python1-identifier">cursor</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-identifier">filter_value</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">filter_type</span><span class="python1-symbol">.</span><span class="python1-identifier">get</span><span class="python1-symbol">()
</span><span class="python1-space">        
        </span><span class="python1-reservedword">if</span><span class="python1-space"> </span><span class="python1-identifier">filter_value</span><span class="python1-space"> </span><span class="python1-symbol">==</span><span class="python1-space"> </span><span class="python1-string">&quot;Todos&quot;</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">execute</span><span class="python1-symbol">(</span><span class="python1-multi-linestring">'''
                SELECT id, fecha, tipo, categoria, monto, descripcion 
                FROM transacciones 
                ORDER BY fecha DESC
            '''</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-reservedword">else</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">execute</span><span class="python1-symbol">(</span><span class="python1-multi-linestring">'''
                SELECT id, fecha, tipo, categoria, monto, descripcion 
                FROM transacciones 
                WHERE tipo = ?
                ORDER BY fecha DESC
            '''</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-symbol">(</span><span class="python1-identifier">filter_value</span><span class="python1-symbol">,))
</span><span class="python1-space">        
        </span><span class="python1-identifier">transactions</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">fetchall</span><span class="python1-symbol">()
</span><span class="python1-space">        
        </span><span class="python1-comment"># Insertar datos en la tabla
</span><span class="python1-space">        </span><span class="python1-reservedword">for</span><span class="python1-space"> </span><span class="python1-identifier">i</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">transaction</span><span class="python1-space"> </span><span class="python1-reservedword">in</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">enumerate</span><span class="python1-symbol">(</span><span class="python1-identifier">transactions</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">1</span><span class="python1-symbol">):
</span><span class="python1-space">            </span><span class="python1-identifier">trans_id</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">fecha</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">tipo</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">categoria</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">monto</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">descripcion</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">transaction
</span><span class="python1-space">            </span><span class="python1-identifier">monto_str</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">f</span><span class="python1-string">&quot;${monto:,.2f}&quot;
</span><span class="python1-space">            
            </span><span class="python1-comment"># Cambiar color segГєn el tipo
</span><span class="python1-space">            </span><span class="python1-identifier">tags</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-symbol">(</span><span class="python1-string">'ingreso'</span><span class="python1-symbol">,)</span><span class="python1-space"> </span><span class="python1-reservedword">if</span><span class="python1-space"> </span><span class="python1-identifier">tipo</span><span class="python1-space"> </span><span class="python1-symbol">==</span><span class="python1-space"> </span><span class="python1-string">&quot;Ingreso&quot;</span><span class="python1-space"> </span><span class="python1-reservedword">else</span><span class="python1-space"> </span><span class="python1-symbol">(</span><span class="python1-string">'gasto'</span><span class="python1-symbol">,)
</span><span class="python1-space">            
            </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">insert</span><span class="python1-symbol">(
</span><span class="python1-space">                </span><span class="python1-string">&quot;&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">END</span><span class="python1-symbol">,</span><span class="python1-space"> 
                </span><span class="python1-identifier">values</span><span class="python1-symbol">=(</span><span class="python1-identifier">i</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">fecha</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">tipo</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">categoria</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">monto_str</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">descripcion</span><span class="python1-symbol">),
</span><span class="python1-space">                </span><span class="python1-identifier">tags</span><span class="python1-symbol">=</span><span class="python1-identifier">tags
</span><span class="python1-space">            </span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># Configurar estilos para las filas
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">tag_configure</span><span class="python1-symbol">(</span><span class="python1-string">'ingreso'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">foreground</span><span class="python1-symbol">=</span><span class="python1-string">'green'</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">tag_configure</span><span class="python1-symbol">(</span><span class="python1-string">'gasto'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">foreground</span><span class="python1-symbol">=</span><span class="python1-string">'red'</span><span class="python1-symbol">)
</span><span class="python1-space">    
    </span><span class="python1-reservedword">def</span><span class="python1-space"> </span><span class="python1-functionname">delete_selected_transactions</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">):
</span><span class="python1-space">        </span><span class="python1-identifier">selected_items</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">selection</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-reservedword">if</span><span class="python1-space"> </span><span class="python1-reservedword">not</span><span class="python1-space"> </span><span class="python1-identifier">selected_items</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-identifier">messagebox</span><span class="python1-symbol">.</span><span class="python1-identifier">showwarning</span><span class="python1-symbol">(</span><span class="python1-string">&quot;Advertencia&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;Por favor seleccione al menos una transacciГіn&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">            </span><span class="python1-reservedword">return
</span><span class="python1-space">        
        </span><span class="python1-identifier">confirm</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">messagebox</span><span class="python1-symbol">.</span><span class="python1-identifier">askyesno</span><span class="python1-symbol">(
</span><span class="python1-space">            </span><span class="python1-string">&quot;Confirmar&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> 
            </span><span class="python1-identifier">f</span><span class="python1-string">&quot;ВїEstГЎ seguro que desea eliminar las {len(selected_items)} transacciones seleccionadas?&quot;
</span><span class="python1-space">        </span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-reservedword">if</span><span class="python1-space"> </span><span class="python1-reservedword">not</span><span class="python1-space"> </span><span class="python1-identifier">confirm</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-reservedword">return
</span><span class="python1-space">        
        </span><span class="python1-identifier">cursor</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">conn</span><span class="python1-symbol">.</span><span class="python1-identifier">cursor</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-identifier">deleted_count</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-number">0
</span><span class="python1-space">        
        </span><span class="python1-reservedword">for</span><span class="python1-space"> </span><span class="python1-identifier">item</span><span class="python1-space"> </span><span class="python1-reservedword">in</span><span class="python1-space"> </span><span class="python1-identifier">selected_items</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-identifier">item_id</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">transaction_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">item</span><span class="python1-symbol">(</span><span class="python1-identifier">item</span><span class="python1-symbol">)[</span><span class="python1-string">'values'</span><span class="python1-symbol">][</span><span class="python1-number">0</span><span class="python1-symbol">]
</span><span class="python1-space">            </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">execute</span><span class="python1-symbol">(</span><span class="python1-string">'DELETE FROM transacciones WHERE id = ?'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-symbol">(</span><span class="python1-identifier">item_id</span><span class="python1-symbol">,))
</span><span class="python1-space">            </span><span class="python1-identifier">deleted_count</span><span class="python1-space"> </span><span class="python1-symbol">+=</span><span class="python1-space"> </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">rowcount
</span><span class="python1-space">        
        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">conn</span><span class="python1-symbol">.</span><span class="python1-identifier">commit</span><span class="python1-symbol">()
</span><span class="python1-space">        
        </span><span class="python1-reservedword">if</span><span class="python1-space"> </span><span class="python1-identifier">deleted_count</span><span class="python1-space"> </span><span class="python1-symbol">&gt;</span><span class="python1-space"> </span><span class="python1-number">0</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-identifier">messagebox</span><span class="python1-symbol">.</span><span class="python1-identifier">showinfo</span><span class="python1-symbol">(</span><span class="python1-string">&quot;Г‰xito&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">f</span><span class="python1-string">&quot;Se eliminaron {deleted_count} transacciones&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">            </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">update_transaction_table</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-reservedword">else</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-identifier">messagebox</span><span class="python1-symbol">.</span><span class="python1-identifier">showerror</span><span class="python1-symbol">(</span><span class="python1-string">&quot;Error&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;No se pudo eliminar ninguna transacciГіn&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">    
    </span><span class="python1-reservedword">def</span><span class="python1-space"> </span><span class="python1-functionname">export_to_csv</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">):
</span><span class="python1-space">        </span><span class="python1-comment"># ImplementaciГіn bГЎsica - en una aplicaciГіn real, esto generarГ­a un archivo CSV
</span><span class="python1-space">        </span><span class="python1-identifier">messagebox</span><span class="python1-symbol">.</span><span class="python1-identifier">showinfo</span><span class="python1-symbol">(</span><span class="python1-string">&quot;InformaciГіn&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;Esta funciГіn exportarГ­a los datos a CSV en una implementaciГіn completa&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">    
    </span><span class="python1-reservedword">def</span><span class="python1-space"> </span><span class="python1-functionname">show_financial_summary</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">):
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">clear_work_area</span><span class="python1-symbol">()
</span><span class="python1-space">        
        </span><span class="python1-comment"># Frame principal para el resumen
</span><span class="python1-space">        </span><span class="python1-identifier">summary_frame</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Frame</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">work_area</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">summary_frame</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">BOTH</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">expand</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">True</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">20</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=</span><span class="python1-number">20</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># TГ­tulo
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">summary_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Resumen Financiero&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">style</span><span class="python1-symbol">=</span><span class="python1-string">'Header.TLabel'</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">pady</span><span class="python1-symbol">=(</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">20</span><span class="python1-symbol">))
</span><span class="python1-space">        
        </span><span class="python1-comment"># Obtener datos de resumen
</span><span class="python1-space">        </span><span class="python1-identifier">cursor</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">conn</span><span class="python1-symbol">.</span><span class="python1-identifier">cursor</span><span class="python1-symbol">()
</span><span class="python1-space">        
        </span><span class="python1-comment"># Ingresos totales
</span><span class="python1-space">        </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">execute</span><span class="python1-symbol">(</span><span class="python1-string">'SELECT SUM(monto) FROM transacciones WHERE tipo = &quot;Ingreso&quot;'</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">total_income</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">fetchone</span><span class="python1-symbol">()[</span><span class="python1-number">0</span><span class="python1-symbol">]</span><span class="python1-space"> </span><span class="python1-reservedword">or</span><span class="python1-space"> </span><span class="python1-number">0
</span><span class="python1-space">        
        </span><span class="python1-comment"># Gastos totales
</span><span class="python1-space">        </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">execute</span><span class="python1-symbol">(</span><span class="python1-string">'SELECT SUM(monto) FROM transacciones WHERE tipo = &quot;Gasto&quot;'</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">total_expenses</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">fetchone</span><span class="python1-symbol">()[</span><span class="python1-number">0</span><span class="python1-symbol">]</span><span class="python1-space"> </span><span class="python1-reservedword">or</span><span class="python1-space"> </span><span class="python1-number">0
</span><span class="python1-space">        
        </span><span class="python1-comment"># Balance
</span><span class="python1-space">        </span><span class="python1-identifier">balance</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">total_income</span><span class="python1-space"> </span><span class="python1-symbol">-</span><span class="python1-space"> </span><span class="python1-identifier">total_expenses
</span><span class="python1-space">        
        </span><span class="python1-comment"># Mostrar mГ©tricas principales
</span><span class="python1-space">        </span><span class="python1-identifier">metrics_frame</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Frame</span><span class="python1-symbol">(</span><span class="python1-identifier">summary_frame</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">metrics_frame</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">X</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=(</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">20</span><span class="python1-symbol">))
</span><span class="python1-space">        
        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">metrics_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-identifier">f</span><span class="python1-string">&quot;Ingresos Totales: ${total_income:,.2f}&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> 
                 </span><span class="python1-identifier">font</span><span class="python1-symbol">=(</span><span class="python1-string">'Arial'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">12</span><span class="python1-symbol">),</span><span class="python1-space"> </span><span class="python1-identifier">foreground</span><span class="python1-symbol">=</span><span class="python1-string">'green'</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">LEFT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">10</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">metrics_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-identifier">f</span><span class="python1-string">&quot;Gastos Totales: ${total_expenses:,.2f}&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> 
                 </span><span class="python1-identifier">font</span><span class="python1-symbol">=(</span><span class="python1-string">'Arial'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">12</span><span class="python1-symbol">),</span><span class="python1-space"> </span><span class="python1-identifier">foreground</span><span class="python1-symbol">=</span><span class="python1-string">'red'</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">LEFT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">10</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">metrics_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-identifier">f</span><span class="python1-string">&quot;Balance: ${balance:,.2f}&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> 
                 </span><span class="python1-identifier">font</span><span class="python1-symbol">=(</span><span class="python1-string">'Arial'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">12</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">'bold'</span><span class="python1-symbol">),</span><span class="python1-space"> 
                 </span><span class="python1-identifier">foreground</span><span class="python1-symbol">=</span><span class="python1-string">'blue'</span><span class="python1-space"> </span><span class="python1-reservedword">if</span><span class="python1-space"> </span><span class="python1-identifier">balance</span><span class="python1-space"> </span><span class="python1-symbol">&gt;=</span><span class="python1-space"> </span><span class="python1-number">0</span><span class="python1-space"> </span><span class="python1-reservedword">else</span><span class="python1-space"> </span><span class="python1-string">'red'</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">LEFT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">10</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># GrГЎfico de gastos por categorГ­a (simulado con texto)
</span><span class="python1-space">        </span><span class="python1-identifier">chart_frame</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Frame</span><span class="python1-symbol">(</span><span class="python1-identifier">summary_frame</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">chart_frame</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">BOTH</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">expand</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">True</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">chart_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;DistribuciГіn de Gastos por CategorГ­a&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> 
                 </span><span class="python1-identifier">font</span><span class="python1-symbol">=(</span><span class="python1-string">'Arial'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">11</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">'bold'</span><span class="python1-symbol">)).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">pady</span><span class="python1-symbol">=(</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">10</span><span class="python1-symbol">))
</span><span class="python1-space">        
        </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">execute</span><span class="python1-symbol">(</span><span class="python1-multi-linestring">'''
            SELECT categoria, SUM(monto) 
            FROM transacciones 
            WHERE tipo = &quot;Gasto&quot; 
            GROUP BY categoria 
            ORDER BY SUM(monto) DESC
        '''</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">expenses_by_category</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">fetchall</span><span class="python1-symbol">()
</span><span class="python1-space">        
        </span><span class="python1-reservedword">for</span><span class="python1-space"> </span><span class="python1-identifier">category</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">amount</span><span class="python1-space"> </span><span class="python1-reservedword">in</span><span class="python1-space"> </span><span class="python1-identifier">expenses_by_category</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-identifier">category_frame</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Frame</span><span class="python1-symbol">(</span><span class="python1-identifier">chart_frame</span><span class="python1-symbol">)
</span><span class="python1-space">            </span><span class="python1-identifier">category_frame</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">X</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=</span><span class="python1-number">2</span><span class="python1-symbol">)
</span><span class="python1-space">            
            </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">category_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-identifier">category</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">width</span><span class="python1-symbol">=</span><span class="python1-number">20</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">LEFT</span><span class="python1-symbol">)
</span><span class="python1-space">            
            </span><span class="python1-comment"># Barra de progreso simulada
</span><span class="python1-space">            </span><span class="python1-identifier">max_amount</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">max</span><span class="python1-symbol">(</span><span class="python1-identifier">row</span><span class="python1-symbol">[</span><span class="python1-number">1</span><span class="python1-symbol">]</span><span class="python1-space"> </span><span class="python1-reservedword">for</span><span class="python1-space"> </span><span class="python1-identifier">row</span><span class="python1-space"> </span><span class="python1-reservedword">in</span><span class="python1-space"> </span><span class="python1-identifier">expenses_by_category</span><span class="python1-symbol">)
</span><span class="python1-space">            </span><span class="python1-identifier">bar_length</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">int</span><span class="python1-symbol">(</span><span class="python1-number">300</span><span class="python1-space"> </span><span class="python1-symbol">*</span><span class="python1-space"> </span><span class="python1-symbol">(</span><span class="python1-identifier">amount</span><span class="python1-space"> </span><span class="python1-symbol">/</span><span class="python1-space"> </span><span class="python1-identifier">max_amount</span><span class="python1-symbol">))
</span><span class="python1-space">            
            </span><span class="python1-identifier">canvas</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">Canvas</span><span class="python1-symbol">(</span><span class="python1-identifier">category_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">height</span><span class="python1-symbol">=</span><span class="python1-number">20</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">width</span><span class="python1-symbol">=</span><span class="python1-number">300</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">bg</span><span class="python1-symbol">=</span><span class="python1-string">'white'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">highlightthickness</span><span class="python1-symbol">=</span><span class="python1-number">0</span><span class="python1-symbol">)
</span><span class="python1-space">            </span><span class="python1-identifier">canvas</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">LEFT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">            </span><span class="python1-identifier">canvas</span><span class="python1-symbol">.</span><span class="python1-identifier">create_rectangle</span><span class="python1-symbol">(</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">bar_length</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">20</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-string">'#FF6B6B'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">outline</span><span class="python1-symbol">=</span><span class="python1-string">''</span><span class="python1-symbol">)
</span><span class="python1-space">            
            </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">category_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-identifier">f</span><span class="python1-string">&quot;${amount:,.2f}&quot;</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">LEFT</span><span class="python1-symbol">)
</span><span class="python1-space">    
    </span><span class="python1-reservedword">def</span><span class="python1-space"> </span><span class="python1-functionname">show_category_management</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">):
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">clear_work_area</span><span class="python1-symbol">()
</span><span class="python1-space">        
        </span><span class="python1-comment"># Frame principal para gestiГіn de categorГ­as
</span><span class="python1-space">        </span><span class="python1-identifier">category_frame</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Frame</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">work_area</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">category_frame</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">BOTH</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">expand</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">True</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">20</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=</span><span class="python1-number">20</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># TГ­tulo
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">category_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;GestiГіn de CategorГ­as&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">style</span><span class="python1-symbol">=</span><span class="python1-string">'Header.TLabel'</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">pady</span><span class="python1-symbol">=(</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">20</span><span class="python1-symbol">))
</span><span class="python1-space">        
        </span><span class="python1-comment"># Frame para formulario de nueva categorГ­a
</span><span class="python1-space">        </span><span class="python1-identifier">new_cat_frame</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Frame</span><span class="python1-symbol">(</span><span class="python1-identifier">category_frame</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">new_cat_frame</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">X</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=(</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">20</span><span class="python1-symbol">))
</span><span class="python1-space">        
        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">new_cat_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Nueva CategorГ­a:&quot;</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">LEFT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">new_category_name</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Entry</span><span class="python1-symbol">(</span><span class="python1-identifier">new_cat_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">width</span><span class="python1-symbol">=</span><span class="python1-number">20</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">new_category_name</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">LEFT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">new_category_type</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">StringVar</span><span class="python1-symbol">(</span><span class="python1-identifier">value</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Gasto&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Radiobutton</span><span class="python1-symbol">(</span><span class="python1-identifier">new_cat_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Gasto&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">variable</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">new_category_type</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">value</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Gasto&quot;</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">LEFT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Radiobutton</span><span class="python1-symbol">(</span><span class="python1-identifier">new_cat_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Ingreso&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">variable</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">new_category_type</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">value</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Ingreso&quot;</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">LEFT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">5</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Button</span><span class="python1-symbol">(</span><span class="python1-identifier">new_cat_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Agregar&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">command</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">add_new_category</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">LEFT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">10</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># Tabla de categorГ­as existentes
</span><span class="python1-space">        </span><span class="python1-identifier">columns</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-symbol">(</span><span class="python1-string">&quot;#&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;Nombre&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;Tipo&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;Acciones&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">category_tree</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Treeview</span><span class="python1-symbol">(
</span><span class="python1-space">            </span><span class="python1-identifier">category_frame</span><span class="python1-symbol">,</span><span class="python1-space"> 
            </span><span class="python1-identifier">columns</span><span class="python1-symbol">=</span><span class="python1-identifier">columns</span><span class="python1-symbol">,</span><span class="python1-space"> 
            </span><span class="python1-identifier">show</span><span class="python1-symbol">=</span><span class="python1-string">&quot;headings&quot;</span><span class="python1-symbol">,
</span><span class="python1-space">            </span><span class="python1-identifier">selectmode</span><span class="python1-symbol">=</span><span class="python1-string">&quot;browse&quot;
</span><span class="python1-space">        </span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-reservedword">for</span><span class="python1-space"> </span><span class="python1-identifier">col</span><span class="python1-space"> </span><span class="python1-reservedword">in</span><span class="python1-space"> </span><span class="python1-identifier">columns</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">category_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">heading</span><span class="python1-symbol">(</span><span class="python1-identifier">col</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-identifier">col</span><span class="python1-symbol">)
</span><span class="python1-space">            </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">category_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">column</span><span class="python1-symbol">(</span><span class="python1-identifier">col</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">width</span><span class="python1-symbol">=</span><span class="python1-number">100</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">anchor</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">CENTER</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">category_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">column</span><span class="python1-symbol">(</span><span class="python1-string">&quot;#&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">width</span><span class="python1-symbol">=</span><span class="python1-number">50</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">category_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">column</span><span class="python1-symbol">(</span><span class="python1-string">&quot;Acciones&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">width</span><span class="python1-symbol">=</span><span class="python1-number">100</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-identifier">scrollbar</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Scrollbar</span><span class="python1-symbol">(</span><span class="python1-identifier">category_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">orient</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">VERTICAL</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">command</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">category_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">yview</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">category_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">configure</span><span class="python1-symbol">(</span><span class="python1-identifier">yscrollcommand</span><span class="python1-symbol">=</span><span class="python1-identifier">scrollbar</span><span class="python1-symbol">.</span><span class="python1-identifier">set</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">category_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">LEFT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">BOTH</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">expand</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">True</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">scrollbar</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">side</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">RIGHT</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">Y</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># Actualizar tabla de categorГ­as
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">update_category_table</span><span class="python1-symbol">()
</span><span class="python1-space">    
    </span><span class="python1-reservedword">def</span><span class="python1-space"> </span><span class="python1-functionname">update_category_table</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">):
</span><span class="python1-space">        </span><span class="python1-comment"># Limpiar tabla
</span><span class="python1-space">        </span><span class="python1-reservedword">for</span><span class="python1-space"> </span><span class="python1-identifier">item</span><span class="python1-space"> </span><span class="python1-reservedword">in</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">category_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">get_children</span><span class="python1-symbol">():
</span><span class="python1-space">            </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">category_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">delete</span><span class="python1-symbol">(</span><span class="python1-identifier">item</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># Obtener categorГ­as
</span><span class="python1-space">        </span><span class="python1-identifier">cursor</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">conn</span><span class="python1-symbol">.</span><span class="python1-identifier">cursor</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">execute</span><span class="python1-symbol">(</span><span class="python1-string">'SELECT id, nombre, tipo FROM categorias ORDER BY tipo, nombre'</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">categories</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">fetchall</span><span class="python1-symbol">()
</span><span class="python1-space">        
        </span><span class="python1-comment"># Insertar datos en la tabla
</span><span class="python1-space">        </span><span class="python1-reservedword">for</span><span class="python1-space"> </span><span class="python1-identifier">i</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-symbol">(</span><span class="python1-identifier">cat_id</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">nombre</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">tipo</span><span class="python1-symbol">)</span><span class="python1-space"> </span><span class="python1-reservedword">in</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">enumerate</span><span class="python1-symbol">(</span><span class="python1-identifier">categories</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">1</span><span class="python1-symbol">):
</span><span class="python1-space">            </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">category_tree</span><span class="python1-symbol">.</span><span class="python1-identifier">insert</span><span class="python1-symbol">(
</span><span class="python1-space">                </span><span class="python1-string">&quot;&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">END</span><span class="python1-symbol">,</span><span class="python1-space"> 
                </span><span class="python1-identifier">values</span><span class="python1-symbol">=(</span><span class="python1-identifier">i</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">nombre</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">tipo</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;Eliminar&quot;</span><span class="python1-symbol">),
</span><span class="python1-space">                </span><span class="python1-identifier">iid</span><span class="python1-symbol">=</span><span class="python1-identifier">cat_id
</span><span class="python1-space">            </span><span class="python1-symbol">)
</span><span class="python1-space">    
    </span><span class="python1-reservedword">def</span><span class="python1-space"> </span><span class="python1-functionname">add_new_category</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">):
</span><span class="python1-space">        </span><span class="python1-identifier">name</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">new_category_name</span><span class="python1-symbol">.</span><span class="python1-identifier">get</span><span class="python1-symbol">().</span><span class="python1-identifier">strip</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-identifier">cat_type</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">new_category_type</span><span class="python1-symbol">.</span><span class="python1-identifier">get</span><span class="python1-symbol">()
</span><span class="python1-space">        
        </span><span class="python1-reservedword">if</span><span class="python1-space"> </span><span class="python1-reservedword">not</span><span class="python1-space"> </span><span class="python1-identifier">name</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-identifier">messagebox</span><span class="python1-symbol">.</span><span class="python1-identifier">showerror</span><span class="python1-symbol">(</span><span class="python1-string">&quot;Error&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;Por favor ingrese un nombre para la categorГ­a&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">            </span><span class="python1-reservedword">return
</span><span class="python1-space">        
        </span><span class="python1-identifier">cursor</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">conn</span><span class="python1-symbol">.</span><span class="python1-identifier">cursor</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-reservedword">try</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">execute</span><span class="python1-symbol">(</span><span class="python1-string">'INSERT INTO categorias (nombre, tipo) VALUES (?, ?)'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-symbol">(</span><span class="python1-identifier">name</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">cat_type</span><span class="python1-symbol">))
</span><span class="python1-space">            </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">conn</span><span class="python1-symbol">.</span><span class="python1-identifier">commit</span><span class="python1-symbol">()
</span><span class="python1-space">            </span><span class="python1-identifier">messagebox</span><span class="python1-symbol">.</span><span class="python1-identifier">showinfo</span><span class="python1-symbol">(</span><span class="python1-string">&quot;Г‰xito&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;CategorГ­a agregada correctamente&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">            </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">new_category_name</span><span class="python1-symbol">.</span><span class="python1-identifier">delete</span><span class="python1-symbol">(</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">END</span><span class="python1-symbol">)
</span><span class="python1-space">            </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">update_category_table</span><span class="python1-symbol">()
</span><span class="python1-space">            </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">update_category_combobox</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-reservedword">except</span><span class="python1-space"> </span><span class="python1-identifier">sqlite3</span><span class="python1-symbol">.</span><span class="python1-identifier">IntegrityError</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-identifier">messagebox</span><span class="python1-symbol">.</span><span class="python1-identifier">showerror</span><span class="python1-symbol">(</span><span class="python1-string">&quot;Error&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;Ya existe una categorГ­a con ese nombre&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">    
    </span><span class="python1-reservedword">def</span><span class="python1-space"> </span><span class="python1-functionname">delete_category</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">category_id</span><span class="python1-symbol">):
</span><span class="python1-space">        </span><span class="python1-comment"># Primero verificar si hay transacciones asociadas
</span><span class="python1-space">        </span><span class="python1-identifier">cursor</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">conn</span><span class="python1-symbol">.</span><span class="python1-identifier">cursor</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">execute</span><span class="python1-symbol">(</span><span class="python1-string">'SELECT COUNT(*) FROM transacciones WHERE categoria = (SELECT nombre FROM categorias WHERE id = ?)'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-symbol">(</span><span class="python1-identifier">category_id</span><span class="python1-symbol">,))
</span><span class="python1-space">        </span><span class="python1-identifier">count</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">fetchone</span><span class="python1-symbol">()[</span><span class="python1-number">0</span><span class="python1-symbol">]
</span><span class="python1-space">        
        </span><span class="python1-reservedword">if</span><span class="python1-space"> </span><span class="python1-identifier">count</span><span class="python1-space"> </span><span class="python1-symbol">&gt;</span><span class="python1-space"> </span><span class="python1-number">0</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-identifier">messagebox</span><span class="python1-symbol">.</span><span class="python1-identifier">showerror</span><span class="python1-symbol">(</span><span class="python1-string">&quot;Error&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;No se puede eliminar esta categorГ­a porque tiene transacciones asociadas&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">            </span><span class="python1-reservedword">return
</span><span class="python1-space">        
        </span><span class="python1-identifier">confirm</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">messagebox</span><span class="python1-symbol">.</span><span class="python1-identifier">askyesno</span><span class="python1-symbol">(
</span><span class="python1-space">            </span><span class="python1-string">&quot;Confirmar&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> 
            </span><span class="python1-string">&quot;ВїEstГЎ seguro que desea eliminar esta categorГ­a?&quot;
</span><span class="python1-space">        </span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-reservedword">if</span><span class="python1-space"> </span><span class="python1-identifier">confirm</span><span class="python1-symbol">:
</span><span class="python1-space">            </span><span class="python1-identifier">cursor</span><span class="python1-symbol">.</span><span class="python1-identifier">execute</span><span class="python1-symbol">(</span><span class="python1-string">'DELETE FROM categorias WHERE id = ?'</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-symbol">(</span><span class="python1-identifier">category_id</span><span class="python1-symbol">,))
</span><span class="python1-space">            </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">conn</span><span class="python1-symbol">.</span><span class="python1-identifier">commit</span><span class="python1-symbol">()
</span><span class="python1-space">            </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">update_category_table</span><span class="python1-symbol">()
</span><span class="python1-space">            </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">update_category_combobox</span><span class="python1-symbol">()
</span><span class="python1-space">            </span><span class="python1-identifier">messagebox</span><span class="python1-symbol">.</span><span class="python1-identifier">showinfo</span><span class="python1-symbol">(</span><span class="python1-string">&quot;Г‰xito&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;CategorГ­a eliminada correctamente&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">    
    </span><span class="python1-reservedword">def</span><span class="python1-space"> </span><span class="python1-functionname">show_settings</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">):
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">clear_work_area</span><span class="python1-symbol">()
</span><span class="python1-space">        
        </span><span class="python1-comment"># Frame para configuraciГіn
</span><span class="python1-space">        </span><span class="python1-identifier">settings_frame</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Frame</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">work_area</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">settings_frame</span><span class="python1-symbol">.</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">fill</span><span class="python1-symbol">=</span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">BOTH</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">expand</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">True</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">padx</span><span class="python1-symbol">=</span><span class="python1-number">20</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">pady</span><span class="python1-symbol">=</span><span class="python1-number">20</span><span class="python1-symbol">)
</span><span class="python1-space">        
        </span><span class="python1-comment"># TГ­tulo
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">settings_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;ConfiguraciГіn&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">style</span><span class="python1-symbol">=</span><span class="python1-string">'Header.TLabel'</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">pady</span><span class="python1-symbol">=(</span><span class="python1-number">0</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-number">20</span><span class="python1-symbol">))
</span><span class="python1-space">        
        </span><span class="python1-comment"># Opciones de configuraciГіn (simuladas)
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">settings_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Esta es la secciГіn de configuraciГіn&quot;</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">settings_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;En una implementaciГіn completa aquГ­ habrГ­a opciones como:&quot;</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">pady</span><span class="python1-symbol">=</span><span class="python1-number">10</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">settings_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;- Moneda predeterminada&quot;</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">settings_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;- Formato de fecha&quot;</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">settings_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;- Copias de seguridad automГЎticas&quot;</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Label</span><span class="python1-symbol">(</span><span class="python1-identifier">settings_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;- Tema de la interfaz&quot;</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">()
</span><span class="python1-space">        
        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Button</span><span class="python1-symbol">(</span><span class="python1-identifier">settings_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Exportar Base de Datos&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">command</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">export_database</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">(</span><span class="python1-identifier">pady</span><span class="python1-symbol">=</span><span class="python1-number">20</span><span class="python1-symbol">)
</span><span class="python1-space">        </span><span class="python1-identifier">ttk</span><span class="python1-symbol">.</span><span class="python1-identifier">Button</span><span class="python1-symbol">(</span><span class="python1-identifier">settings_frame</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">text</span><span class="python1-symbol">=</span><span class="python1-string">&quot;Importar Base de Datos&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">command</span><span class="python1-symbol">=</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">import_database</span><span class="python1-symbol">).</span><span class="python1-identifier">pack</span><span class="python1-symbol">()
</span><span class="python1-space">    
    </span><span class="python1-reservedword">def</span><span class="python1-space"> </span><span class="python1-functionname">export_database</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">):
</span><span class="python1-space">        </span><span class="python1-identifier">messagebox</span><span class="python1-symbol">.</span><span class="python1-identifier">showinfo</span><span class="python1-symbol">(</span><span class="python1-string">&quot;InformaciГіn&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;Esta funciГіn exportarГ­a la base de datos en una implementaciГіn completa&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">    
    </span><span class="python1-reservedword">def</span><span class="python1-space"> </span><span class="python1-functionname">import_database</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">):
</span><span class="python1-space">        </span><span class="python1-identifier">messagebox</span><span class="python1-symbol">.</span><span class="python1-identifier">showinfo</span><span class="python1-symbol">(</span><span class="python1-string">&quot;InformaciГіn&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-string">&quot;Esta funciГіn importarГ­a una base de datos en una implementaciГіn completa&quot;</span><span class="python1-symbol">)
</span><span class="python1-space">    
    </span><span class="python1-reservedword">def</span><span class="python1-space"> </span><span class="python1-functionname">on_closing</span><span class="python1-symbol">(</span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">):
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">conn</span><span class="python1-symbol">.</span><span class="python1-identifier">close</span><span class="python1-symbol">()
</span><span class="python1-space">        </span><span class="python1-nonreservedkeyword">self</span><span class="python1-symbol">.</span><span class="python1-identifier">root</span><span class="python1-symbol">.</span><span class="python1-identifier">destroy</span><span class="python1-symbol">()

</span><span class="python1-reservedword">if</span><span class="python1-space"> </span><span class="python1-nonreservedkeyword">__name__</span><span class="python1-space"> </span><span class="python1-symbol">==</span><span class="python1-space"> </span><span class="python1-string">&quot;__main__&quot;</span><span class="python1-symbol">:
</span><span class="python1-space">    </span><span class="python1-identifier">root</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">tk</span><span class="python1-symbol">.</span><span class="python1-identifier">Tk</span><span class="python1-symbol">()
</span><span class="python1-space">    </span><span class="python1-identifier">app</span><span class="python1-space"> </span><span class="python1-symbol">=</span><span class="python1-space"> </span><span class="python1-identifier">FinanceApp</span><span class="python1-symbol">(</span><span class="python1-identifier">root</span><span class="python1-symbol">)
</span><span class="python1-space">    </span><span class="python1-identifier">root</span><span class="python1-symbol">.</span><span class="python1-identifier">protocol</span><span class="python1-symbol">(</span><span class="python1-string">&quot;WM_DELETE_WINDOW&quot;</span><span class="python1-symbol">,</span><span class="python1-space"> </span><span class="python1-identifier">app</span><span class="python1-symbol">.</span><span class="python1-identifier">on_closing</span><span class="python1-symbol">)
</span><span class="python1-space">    </span><span class="python1-identifier">root</span><span class="python1-symbol">.</span><span class="python1-identifier">mainloop</span><span class="python1-symbol">()

</span></code></pre><!--EndFragment--></body>
</html>